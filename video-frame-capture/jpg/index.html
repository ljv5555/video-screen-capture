<!DOCTYPE html>
<html>
<head>
<title>video capture</title>
<style>
body{font-family:arial;color:blue;}
div,.out{padding:.5em .5em;margin:.5em .5em; background:#def;}
.out{display:inline-block;border:1px solid silver;min-height:1em;min-width:1em;}
</style>
<script>
function getFrame(){
  var video = document.getElementById('v1');
  window.s01='';
  navigator.getUserMedia = navigator.webkitGetUserMedia || navigator.getUserMedia;
  window.URL = window.URL || window.webkitURL;
    navigator.getUserMedia({video: true}, 
    function(stream){  if (window.URL) {  video.src = (window.URL.createObjectURL(stream));  } 
        else {    video.src = stream;   } } ,
    function(){alert('error');});
}
function capture()
{
  var canvas = document.getElementById('canvas1');
  var video = document.getElementById('v1');
  canvas.width = video.videoWidth;
  canvas.height = video.videoHeight;
    
  var canvas = document.getElementById('canvas1');
  var ctx = canvas.getContext('2d');
  ctx.drawImage(document.getElementById('v1'), 0, 0);
  
}

</script>

<body>

<div class="in1" style="border:1px solid silver;">
  <div>
    <button type="button" onclick="getFrame()">get frame</button>
    <button type="button" onclick="capture()">capture</button>
    <!--input style="width:500px;" id="txt1"/ -->
    <button type="button" onclick="window.open(document.getElementById('canvas1').toDataURL('image/jpeg',0.5));">open</button>
  </div>
  <div>
    <table>
      <tr>
        <td><canvas id="canvas1" style="border:5px solid green;"></canvas></td>
        <td><video id="v1" style="border:5px solid red;" autoplay></video></td>
      </tr>
    </table>
  </div>
</div>





</body>
</html>
