<!DOCTYPE html>
<html>
<head>
<title>video capture</title>
<style>
body{font-family:arial;color:blue;}
div,.out{padding:.5em .5em;margin:.5em .5em; background:#def;}
.out{display:inline-block;border:1px solid silver;min-height:1em;min-width:1em;}
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<!--script src="../html2canvas.js"></script-->

<script>

function getFrame(){
  
  window.s01='';
  navigator.getUserMedia = navigator.webkitGetUserMedia || navigator.getUserMedia;
  window.URL = window.URL || window.webkitURL;
    navigator.getUserMedia({video: true}, 
    function(stream){  if (window.URL) {  jQuery('#v1').attr('src',window.URL.createObjectURL(stream));  } 
        else {    video.src = stream;   } } ,
    function(){alert('error');});
}
function capture()
{
  var canvas = document.getElementById('canvas1');
  var ctx = canvas.getContext('2d');
  ctx.drawImage(video, 0, 0);
  document.getElementById('txt1').value = canvas.toDataURL('image/png');

  
}

</script>

<body>

<div class="in1" style="border:1px solid silver;">
  <div>
    <button type="button" onclick="getFrame()">get frame</button>
    <button type="button" onclick="capture()">capture</button>
    <input style="width:500px;" id="txt1"/>
    <canvas id="canvas1" style="border:5px solid green;"></canvas>
  </div>
  <div><video id="v1" style="border:5px solid red;" autoplay></video></div>
</div>





</body>
</html>
